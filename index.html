<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>CSS and stuff</title>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <meta name="description" content="WITICAPAWILIRL">
    <meta name="author" content="Michelle Bu">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
      if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">


      <div class="slides">
        <section>
          <center>
            <h2>Let's talk about our <strong>CSS</strong>.</h2>
            <h5>Michelle Bu</h5><h4>★TXJS</h4>
          </center>
<aside class="notes">
  Thanks Alex!
  <br><br>
Hey everyone. I'm Michelle. Let's talk about CSS today.
</aside>
        </section>

        <section data-background="./images/sf.jpg">
<aside class="notes">
  I work for a company in sunny San Francisco called Stripe. This is what it looks like outside today.
</aside>
        </section>

        <section data-background="#168eda">
          <center>
            <img src="./images/stripe-white.png">
          </center>
<aside class="notes">
Stripe is, most simply, an API that helps you accept other people's money.
<br><br>
The project I'm currently working on is a rewrite of our dashboard, which helps our users keep track of how much money they've made and when they'll get paid. 
<br><br>

</aside>
        </section>

        <section>
          <img src="images/anguished.jpg">
          <img src="images/grimacing.jpg">
          <img src="images/worried.jpg">

          <h4 class="fragment css" style="float:left;"><code>!important</code></h4>
          <img src="images/devil.jpg" style="float:right;margin: -25px 0 0 -25px;" class="fragment">
          <br>
<aside class="notes">
  So, why do we have to talk about CSS, you ask? This is a Javascript conference!

  For a lot of us, CSS is the thing we write once and forget about, and the only tool we need to know in our day-to-day is this one: [!important].
  <br><br>
  But no matter how hard you try to forget about those lines of CSS you just committed, it's still there. It'll always be there. It'll probably outlive your other code, and we'll see how this phenomenon happens later.
  <br><br>
 CSS such a large part of our codebase, but we don't treat it like it is-
</aside>
        </section>


        <section>
          <center>
            <img src="images/csspercentage.png">
            </center>

<aside class="notes">
  Prior to our rewrite project at Stripe, the CSS in our dashboard made up 1/4 of our codebase! That's a quarter of our codebase that people would try to forget about after they finish styling the feature they're working to add. It's understandable that they would do this--developers don't like thinking about CSS. In rewriting our dashboard, we're trying to make it so they don't have to.
</aside>
        </section>

        <section>
          <div class="wrapper" style="position: relative;height: 500px;">
          <div style="position: absolute;">
          <img src="images/paymentmodal.png" style="width: 58%;">
          </div>
          <div class="label fragment" style="position: absolute; width: 40%; right: 0px;">has a <code><strong>modal.js</strong></code>, <code><strong>modal.template</strong></code>, and a corresponding <code><strong style="color: #2a2c5c;">modal.css</strong></code></div>
          </div>
<aside class="notes">
When we first built our current dashboard we created a handful of reusable views. These then had the honor of having their very own reusable CSS for each template.
<br><br>
Everything else was essentially custom per template. Things that weren't obviously Javascript components did not get considered for any sort of CSS reusability.
<br>
<br>
This modal component, for example, was first build with forms in mind. So we have a lot of cool form functionality built it, like "show more fields" and labels for optional fields and generally-nice-looking fieldsets.
</aside>
        </section>

        <section>
          <div class="wrapper" style="position: relative;height: 500px;">
          <div style="position: absolute">
          <img src="images/modalhighlight.png" style="width: 60%;">
          </div>
          <div class="label fragment" style="position: absolute; width: 40%; right: 0px;word-wrap: break-word;">has a few lines in <code><strong style="color: #e02a3f;;">create_new_account_view.css</strong></code></div>
          </div>
<aside class="notes">
  However, as we added more modals to the dashboard, we realized we needed more variants of modals.
  Instead of adding to the generic modal template and CSS, because, to be honest, it was scary to add styles to a generic component without any style guidelines or regression testing, we'd style them per view.
  <br><br>
  This particular modal explanation was added 2 years after the modal component was created, and the explanation is styled just for this view with a few lines in create_new_account_view.
</aside>
        </section>

        <section>
          <strong>
          <pre class="css">
          <code>
.some_specific_view {

  .some_specific_section {

    background-color: pink;

    ...

  }

  ...
}
          </code>
          </pre>
          </strong>
<aside class="notes">
  It was easy to style each individual view separately at first, especially since Sass allowed us to nest our selectors. So we could easily go crazy and style away without worrying about affecting other templates.
  <br><br>
  Except sometimes.
</aside>
        </section>

        <section>
          <img src="images/modalfiles.png">
<aside class="notes">
  What ended up happening over time was just a build up of modal styles that we just put in their parent views' CSS.
</aside>
        </section>

        <section>
          <img src="images/files.png">
<aside class="notes">
  <br><br>
  Some developers were conscientious enough to put the CSS for the very specific modal they were styling into a `modals` folder, or leave TODOs saying they'll generalize the CSS one day.

</aside>
        </section>

        <section>
          <img src="images/atodo.png">
<aside class="notes">
  But it didn't really matter if we were conscientious or not. The fact of the matter was that I would never move that CSS back. I wouldn't know how to and it all felt very fragile. What didn't matter at the time I wrote my CSS, though, is that having it in this parent view's CSS is just as fragile. The parent view i'm in might have multiple modals, and now I might've just accidentally introduced broken styles to the other modal. There's no easy way to tell what side effects my CSS might have.

</aside>
        </section>

        <section>
          <h2>5 minutes in the life of a developer who needs to add some <strong>CSS</strong> to the <strong>existing dashboard</strong>.</h2>
<aside class="notes">
  Now, let me take you into "five minutes in the life of a developer at Stripe who needs to add some CSS"
</aside>
        </section>

        <section>
          <h3>"I need to add an explanation to this field."</h3>
          <img src="images/day/todo.png">
<aside class="notes">
</aside>
        </section>

        <section>
          <h3>"Let me look for a similar thingy."</h3>
          <img src="images/day/lookalike.png">
<aside class="notes">
  My first attempt involves trying to apply the styles from this explanation to my own. But it doesn't work.
</aside>
        </section>

        <section>
          <h3>"Cool, now inspect element."</h3>
          <center>
          <img src="images/day/1.png">
          <img src="images/day/2.png">
          </center>
<aside class="notes">
  So, let's try looking at the CSS.
  <br><br>
  Now I take the first rule, try to grep for it, because my sourcemaps are broken and I promised that this would only take 5 minutes... and I find nothing.
</aside>
        </section>

        <section>
          <h3>"<code>git grep 'div:last-child p'</code>" - nothing</h3>
          <center>
          <img src="images/day/grep.png" class="fragment" width="500px">
          </center>
<aside class="notes">
  And of course I'm going to find nothing, because the styles I'm looking for are heavily nested within the parent view's CSS.
</aside>
        </section>

        <section>
          <h3>"Alright I'll just take the last one and make it look as close as possible."</h3>
          <img src="images/day/copy.png" style="width:50%;float:left;">
          <img src="images/day/paste.png" style="width:50%;float:right;">
<aside class="notes">
  Anyways, at this point I just want to stop worrying about CSS and finish everything else, so I take the last set of styles, find the color, and make my own element look as close as possible.
</aside>
        </section>

        <section>
          <h3>"Donezo!"</h3>
          <img src="images/day/todone.png">
<aside class="notes">
And we're done!
<br><br>
  Another 8 lines added to our CSS. This is no big deal, until you do for 3 years, between more than fifty different engineers.
  <br><br>
So performing this horrible process myself a couple of times and conducting extensive research, I present to you the four stages of CSS degradation--or, how I believe the CSS in our dashboard evolved with our growing engineering team and our changing engineering needs:
</aside>
        </section>

        <section>
          <center>
            <h3>1. Determination</h3>
            <img src="images/info.png" class="fragment">
            <img src="images/folder.png" class="fragment">
            <img src="images/box.png" class="fragment">
            <img src="images/cheers.png" class="fragment">
            <br>
            <h4 class="fragment">(MVP)</h4>
          </center>

<aside class="notes">
  Stage one is "Determination." This is where we're like 10 people total in the company. We're starry eyed and eager to ship a user dashboard.
  <br><br>
  And we're smart, too, so we'll pull in the best tools, like Sass, and clearly define how we want to organize our views and CSS-in a way that makes styling them really easy and development time minimal. All 2 or 3 engineers who work on the dashboard know where everything is, anyways.
  <br><br>
  So we ship and thing and then celebrate. Whoo, mvp!
</aside>
        </section>

        <section>
          <h2>1 year and 10 engineers later...</h2>
<aside class="notes">
</aside>
        </section>

        <section>
          <center>
            <h3>2. Development</h3>
            <img src="images/info.png" class="fragment">
            <img src="images/folder.png" class="fragment">
            <img src="images/bug.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <br>
            <h5 class="fragment">(remember: poop is append-only.)</h5>
          </center>
<aside class="notes">
  Stage two is "Development." This is when we start building the non-MVP features and enhance the existing features. We add a bunch of new views, and everything's still pretty organized, to be honest, and super easy to write! Sass makes everything so easy! But of course there are inevitably bugs.
  <br><br>
  And inevitably those bugs will leave some poopy code around, because you're just fixing a bug and it's pretty urgent so you left a few !importants and TODOs in the code but it's okay you'll fix it later.
  <br><br>
  One thing to keep in mind at this early stage, as Alex has once said to me, "CSS is an append-only language"
</aside>
        </section>
        <section>
          <h2>1 year and 20 engineers later...</h2>
<aside class="notes">
  Wow, you're at 30 engineers now! Development's picking up pace. And this is where you enter the third stage of code degradation...
</aside>
        </section>
        <section>
          <center>
            <h3>3. Denial</h3>
            <img src="images/info.png" class="fragment">
            <img src="images/monkeysee.png" class="fragment">
            <img src="images/monkeyhear.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <br>
            <img src="images/poop.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <img src="images/poop.png" class="fragment">
          </center>
<aside class="notes">
  Well, the dashboard still works. Most of the time. I can't see or hear this poop in this CSS that I only touch once or twice a week. And you know what, this isn't even my team's code to maintain.
  <br><br>
  pooppooppoop
</aside>
        </section>
        <section>
          <h2>6 months and 40 engineers later...</h2>
<aside class="notes">
  You're growing exponentially, and so is the poopy CSS. And here is where you enter the fourth stage, despair.
</aside>
        </section>
        <section>
          <center>
            <h3>4. Despair</h3>
            <img src="images/sadinfo.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <img src="images/poop.png" class="fragment">
            <img src="images/poop.png" class="fragment">
          </center>
<aside class="notes">
  Every time I fix a bug something breaks. Our CSS is growing at a rate of 3 poops per week and there's nothing I can do about it because everything is hopeless.
  <br><br>
So let's break down how our existing dashboard's CSS managed to spiral downhill. It's not that in stage 1 we made bad decisions. I think those decisions were 100% the right decisions, and were perfect for our size and expertise and timeline at that time. The way our CSS was handled optimized for fast development and simplicity.
<br><br>But as the organization grew, our CSS needs started to change. Not every engineer that joined was good at or cared about CSS, or had the context to know exactly how every view in our codebase worked or was used.
<br><br>
Regardless, I believe that if we can start over and talk more about how we write CSS, we could avoid some of these problems. You wouldn't write Javascript without tests or a linter, right? Or generally tolerate poop in other parts of your codebase, so why allow it in CSS?
<br><br>
So, what were the problems?
</aside>
        </section>

        <section>
          <h2><strong>No tests</strong></h2>
          <h3>"It's almost impossible to test CSS." *</h3>
          <h4 class="fragment" style="float: right;">* sorta</h4>
<aside class="notes">
 Well technically our tests were users writing in about something looking funny.
 <br><br>
  We'll go into more about this later.
</aside>
        </section>

        <section>
          <h2><strong>No conventions</strong></h2>
          <strong>
          <h5 class="fragment css">
            <code>.potato { span { ... } }</code>
          </h5>
            <h4 class="fragment css"><code>div.potato > span</code>
          </h4>
          <h5 class="fragment css">
          <code>div.potato span</code>
          </h5>
          <h4 class="fragment css">
          <code>.potato-inner</code>
          </h4>
          <h5 class="fragment css">
          <code>.potato_inner</code>
          </h5>
          <h4 class="fragment css">
          <code>#potato_inner</code>
          </h4>
          </strong>

<aside class="notes">
  Well, technically there were conventions. That each template can have an CSS file. But more specific than that, the actual way the CSS was written had no convention. We'd see everything from nested selectors to very vague selectors to more specifically-named classes of various forms to IDs, even.
</aside>
        </section>

        <section>
          <h2><strong>No CSS reuse</strong></h2>
          <strong>
          <h5 class="fragment css" style="color: #454545;background-color: transparent">
            <code>transfers_list_view.css</code>
          </h5>
          <h5 class="fragment">
            Yup
          </h5>
          <br>
          <h5 class="fragment css" style="color: #454545;background-color: transparent">
            <code>sublist_subscriptions_list_item.css</code>
          </h5>
          <h4 class="fragment">
            Nope
          </h4>
          </strong>
<aside class="notes">
  And finally, what I think was our most important issue: no css reuse.
  <br>
  Again, technically there was CSS reuse (just not any documented, structured, explicit maintainable kind), in the form of reusing the CSS that styled our "reusable" backbone views. But it was completely undocumented, and never worked in the way you wanted it to, because it wasn't bulit for a variety of contexts. and just looking at a particular view's CSS won't tell you whether or not it's being reused or if it's reusable. There just was no concept of pulling out somethign you think might be reused later, because our Very Organized Folder structure and Very Nested SCSS didn't support it.
</aside>
        </section>


        <section>
          <h3>Why does it matter?</h3>
          <center>
            <img src="images/poop.png" class="fragment">
            <img src="images/snail.png" class="fragment">
            <img src="images/sadinfo.png" class="fragment">
          </center>
<aside class="notes">
This causes:
<br>
<br>
- Too much cruft built up to even tackle the non-MVP problems: mobile readiness, accessibility.
Cycle of more and more poop buildup.
<br>
<br>
- Progressively more sluggish to build new things.
<br>
<br>
- Unhappiness when working :(.
and disdain/shame for the codebase, which is unhealthy for the team
<br>
<br>
The first time around, no one will debate that we made the right decisinos at the time, given the tools available. It's just that a lot of our tools and decisions didn't optimize for future happiness.
<br>
<br>
So let's start over. This time, let's add CSS to the conversation. Since we built the first iteration of our dashboard three years ago, a lot has changed, and a lot more tools are now available to help us solve our problems, and let us think of CSS as a first class citizen like the other tools that we use.

</aside>
        </section>

        <section>
          <h2><strong><strike>No</strike> CSS reuse</strong></h2>
          <h2 class="fragment">Boot<img src="images/stripe.png" width="250px" style="margin-bottom: -32px; margin-left: -10px;"></h2>
<aside class="notes">
  Let's start by solving the last problem we talked about, no CSS reuse, because solving this one will help with our other problems as well.
  <br>
  <br>
We're tackling this problem by building our own component library, Bootstripe.
<br>
</aside>
        </section>
        <section>
          <img src="images/propertygrid.png">
<aside class="notes">
  We've split up our new dashboard designs into composable components, everything from a responsive grid like this property grid,</aside>
        </section>

        <section>
          <img src="images/propertygrid2.png">
<aside class="notes">
  ... that you can compose with other components.
</aside>
        </section>

        <section>
          <img src="images/spinner.png">
<aside class="notes">
  all the way down to the small details, like our "Spinner With Label" component and our
 </aside>
        </section>

        <section>
          <img src="images/bootstripe-number.png">
<aside class="notes">
   Big Number component, that's just a number that's screenreader friendly, copypastable, supports multiple types of currencies, and most importantly, is pretty big.
 </aside>
        </section>

        <section>
          <h3>Documentation</h3>
          <img src="images/documentation.png">
<aside class="notes">
  Documentation is automatically generated from comments in the CSS, and is right up in your face when you're building the component, so you're at least guilted into updating it.
 </aside>
        </section>

        <section>
          <img src="images/with-nothing.png">

<aside class="notes">
  CLICK
  Investing the time to build these CSS components may seem daunting at first, but once bootstripe was finished, it was extremely easy to fill a page of our dashboard with these components and worry about the last 10% of the application details.
  </aside>
        </section>
        <section>
          <img src="images/with-header.png">

<aside class="notes">
  Investing the time to build these CSS components may seem daunting at first, but once bootstripe was finished, it was extremely easy to fill a page of our dashboard with these components and worry about the last 10% of the application details.
  </aside>
        </section>
        <section>
          <img src="images/with-actions.png">

<aside class="notes">
  Investing the time to build these CSS components may seem daunting at first, but once bootstripe was finished, it was extremely easy to fill a page of our dashboard with these components and worry about the last 10% of the application details.
  </aside>
        </section>
        <section>
          <img src="images/with-list.png">

<aside class="notes">
  Investing the time to build these CSS components may seem daunting at first, but once bootstripe was finished, it was extremely easy to fill a page of our dashboard with these components and only have to worry about the last bit of application logic.
  </aside>
        </section>
        <section>
          <img src="images/with-labels.png">

<aside class="notes">
  We had thought about the context we would use these components in.
  <br><br>
  An additional side effect that we didn't quite expect or even try to optimize for was that because we had documentation, other engineers working on internal projects began to use bootstripe..
  </aside>
        </section>

        <section>
          <img src="images/peopledotstripe.png">
<aside class="notes">
  developers who only knew basic CSS and didn't want to bother with pixel pushing at all began using bootstripe for internal projects, and loved that their projects could, with minimal work, look nice and "Stripe-y" without writing CSS or consulting a designer.
</aside>
        </section>

        <section>
          <h2><strong><strike>No</strike> conventions</strong></h2>
          <strong>
          <h5 class="fragment css">
            <code>.namespace-</code>
          </h5>
          <h5 class="fragment css">
            <code>
              ComponentName
            </code>
          </h5>
          <h5 class="fragment css">
            <code>
              (-descendant)
            </code>
          </h5>
          <h5 class="fragment css">
            <code>
              (--descriptor)
            </code>
          </h5>
          <br>
          <h4 class="fragment css">
            <code>.bs-</code>
          </h4>
          <h4 class="fragment css">
            <code>
              BigNumber
            </code>
          </h4>
          <h4 class="fragment css">
            <code>
              -delimiter
            </code>
          </h4>
          <h4 class="fragment css">
            <code>
              --comma
            </code>
          </h4>
          </strong>
          <br>
          <img src="images/bignumber.png" class="fragment">
          <br>

<aside class="notes">
  Next, let's tackle the previous lack of conventions. Here's what we've settled on in terms of class naming.
  <br><br>
  This might look familiar to some of you--we borrowed heavily from SUIT CSS naming conventions in coming up with our own.
</aside>
        </section>

        <section>
          <h3><strong>rework</strong></h3>
          <center>
            <div style="position:relative; width: 300px;">
          <img src="images/rework.png" width="100%" style="visibility: hidden">
          <img src="images/rework.png" width="100%" style="position:absolute;top:0px;left: 0;" class="fragment">
          <img src="images/rework-default.png" style="position:absolute;top:0px;left: 0;" width="100%" class="fragment">
          </div>
          </center>
<aside class="notes">
   Before we get too much into that, I'll go over the tools we've adopted for our new dashboard. Sass was amazing for CSS experts and makes their lives much easier, but when most of the folks who work on your CSS only know how to append to the file in semi-arbitrary ways that somehow magically work, it's time to try to find a new tool that will give them less rope. Rework is what we ended up choosing.
  <br><br>
  Rework is a plugin framework for CSS preprocessing. In its default form it takes the CSS you give it, parses it into an abstract syntax tree, the compiles it into the exact same thing on the other end
  <br><Br>
</aside>
        </section>
        <section>
          <h3><strong>rework</strong></h3>
          <center>
            <div style="position:relative; width: 300px;">
          <img src="images/rework.png" width="100%" style="visibility: hidden">
          <img src="images/rework.png" width="100%" style="position:absolute;top:0px;left: 0;" class="fragment">
          <img src="images/rework-deciduous.png" style="position:absolute;top:0px;left: 0;" width="100%" class="fragment">
          </div>
          </center>
<aside class="notes">
  Now, you don't need to know exactly what that means, but the gist of it is that during this middle phase, when our input CSS has been parsed, we can write small plugins that will manipulate the abstract syntax tree before it's compiled back into CSS.
</aside>
        </section>

        <section>
          <h3><strong>rework</strong></h3>
          <center>
          <img src="images/rework-twitter.png" width="300px">
          </center>
<aside class="notes">
  This is super cool because rather than pulling in a magical, monolithic CSS framework for CSS non-experts to use, we are now able to pick and choose specific plugins with limited scope so we can dictate exactly how we want our CSS to be written.
</aside>
        </section>

        <section>
          <h3>Tools make conventions easier.</h3>
          <h4>rework-stripe-conformance</h4>
          <strong><center>
              <img src="images/invalid-selector.png">
          </center>
          </strong>

<aside class="notes">
  rework-stripe-conformance is forked from rework-suit-conformance, and enforces that the CSS you write follows our defined rules. Not only does the checker yell at you if your CSS doesn't conform, it won't even build it.
  <br><br>
  As an example, I added .big-number to the big number component, and the build fails with info about where the error is. Our conformance checks also ensure that your selectors are not too generic--they require a class name of the style I described earlier, and yells at you if you try to style tags directly.
</aside>
        </section>

        <section>
          <h3>Tools make conventions easier.</h3>
          <h5>rework-namespace</h5>
          <strong><center>
          <h4 class="css">
            <code>.<strike>namespace-</strike></code>
          </h4>
          <h4 class="css">
            <code>
              ComponentName
            </code>
          </h4>
          <h4 class="css">
            <code>
              -descendant
            </code>
          </h4>
          <h4 class="css">
            <code>
              --descriptor
            </code>
          </h4>
          </center>
          </strong>

<aside class="notes">
  Let's start simple and just pull in rework-namespace to let us omit that pesky namespace when writing components.
</aside>
        </section>

        <section>
          <h3>Tools make developers happier.</h3>
          <h4>rework-inherit</h4>
          <strong><center>
          <h5 style="float:left;margin-bottom: -30px;margin-top:10px">Checkbox</h5>
          <h5 style="float:right;margin-bottom: -30px;margin-top:10px">Radio button</h5>
          <br>
          <img style="float: left; width:50%;" src="images/checkbox.png">
          <img style="float: right; width:50%;" src="images/radio.png">
          </center>
          </strong>

<aside class="notes">
  We also pulled in rework-inherit, a plugin that lets us use very simple, very limited inheritance.
  <br><Br>
  One common way to style checkboxes and radio buttons is to hide the native input element, then style an empty label element to look like a checkbox or radio button. Except one's squarish and the other is circlish. And then there's a second label element that would be the actual label of the checkbox or radio button.
  <br><br>
  On the left is only a part of the checkbox component, which has a few descendants--a hidden input element, the label that we style to look like a checkbox, and the actual label of the checkbox. On the right is us reusing the checkbox code for the coreesponding three radio button elements. This sort of simple inheritance makes our lives a lot easier, while not being too overloaded and allowing more complex relationships.
</aside>
        </section>

        <section>
          <h3>Tools make developers happier.</h3>
          <strong><center>
          <img src="images/kfcss.png">
          </center>
          </strong>

<aside class="notes">
  We bundled these rework plugins and more into a custom CSS preprocessor, which we call "KFCSS". This is not yet open sourced, but we're working on it!.
</aside>
        </section>

        <section>
          <h3>Tools make developers happier.</h3>
          <h5>kfcss</h5>
          <strong><center>
          <img src="images/features.png">
          </center>
          </strong>

<aside class="notes">
  Here's a brief list of the features we've pulled into KFCSS. this includes everything from rework-inherits and rework-namespace ,which you saw in the slides before, to small helpers like rework-move-media, which jus tmoves media queries to the end of the file, and rework-vars, which gives us CSS level 4-compatible variables.
  <br><br>
  There's nothing too outrageous here, no nesting, no fancy functions beyond a simple "calc".
  <br><br>
  Again, in general we want to 
Limit the scope of features that we're able to use. This way the CSS we write is actually very close to the CSS that is actually applied
</aside>
        </section>

        <section>
          <h3>Abstraction!</h3>
          <strong><center>
          <pre class="html"><code>
<figure aria-labelledby="us-delim-number-1" class="bs-BigNumber">
  <span class="bs-BigNumber-denomination">€</span>5
  <span class="bs-BigNumber-delimiter--period"></span>678
  <span class="bs-BigNumber-decimal">
    <span class="bs-BigNumber-decimal-point">,</span>99
  </span>
  <figcaption id="us-delim-number-1">€5.678,99</figcaption>
</figure>
          </code>
          </pre>
          <pre class="fragment" style="font-size: 0.8em;"><code>{{bs-big-number number=5678.99 country="DE"}}</code></pre>
  <img src="images/gb.png" class="fragment">
          </center>
          </strong>

<aside class="notes">
  You're probably making fun of how ugly our class names are. It does, after all, get quite verbose, especially when you're starting to worry about accessibility and user experience and updating the markup of your components from time to time--one thing to keep in mind is that markup is VERY closely tied to your CSS. When you change one, you also need to change the other, so it should also be properly abstracted.
  <br>
there was a bit of controversy when we first introduced these components, around both the long classnames and the verboseness o fhte markup, but the reality is you hopefully will only be writing HTML by hand ONCE. (In fact, if you did write them by hand in more than one place, whenever your components change, you'll need to change them in every single place.) you likely want to abstract them away with templates. In our case we're using Handlebars, but all templating languages work fine.
but when focussed on writing CSS components and markup that makes sense (instead of just being the simplest possible thing), these classes make it a lot easier to think about how to structure your CSS. 
<br><br>
This is not groundbreaking, but abstracting away components make deleting code easier and upgrading markup for css. no more direct coupling of css to your templates.
</aside>
        </section>

        <section>
          <h3>Abstraction!</h3>
          <img src="images/bootstripe-variants.png">

<aside class="notes">
  If you're using a framework like Ember or React, you can take it a step further and build Ember or react component librararies for your CSS component library
  <br><br>
  We've build ember-bootstripe and react-bootstripe.
</aside>
        </section>

        <section>
          <h2><strong><strike>No</strike> tests</strong></h2>
          <center>
          <img src="images/checkbox-test.png" width="400px" class="fragment">
          <br>
          <h4 class="fragment">
            rework-pseudo-classes
          </h4>
          <h5 class="fragment">
            grunt-huxley
          </h5>
          </center>
<aside class="notes">
  The truth is, testing CSS IS pretty hard.
  <br><br>
  One of the reasons we're ABLE to test now is because we've built a CSS component library. If you've ever had to visually diff a whole page before, you'll know that it's often not very effective--things are always changing, and you don't want to always play Find the super-subtle Difference every time you make a CSS change.
  <br><br>
  Additionally, the hardest part about testing CSS are the various states your elements can be in. With our small components, we use rework-pseudo-classes to mock these states, so we can declaratively write tests.
  <br><br>
  We then use a tool called Huxley to take screenshots of our tests and diff them.
</aside>
        </section>

        <section>
          <center>
            <img src="images/bad-test.png">
          </center>

<aside class="notes">
  In this case, a 2px margin change is very easily and obviously picked up by our visual diffs.
</aside>
        </section>

        <section>
          <center>
            <img src="images/github.png">
          </center>
<aside class="notes">
  A bonus you get from checking these screenshots in is that you're able to see the diffs on Github when you commit. The general rule for us is that you shouldn't be merging in these commits unless a designer signs off on your changes. These screenshots make it relaly easy to visualize subtle css changes. Our favorite is the onion skin diff mode on Github :).
</aside>
        </section>


        <section>
          <center>
            <img src="images/why.png">
          </center>
<aside class="notes">
  So while the benefits seem pretty clear, the upfront time investment is still there--why would you take the time to write your own CSS component library?
  <br><br>
  For us, it made sense because we have our own design language and a fast-growing team. It might not make sense for you, but CSS is definitely something you should still talk and think about when starting new projects.
</aside>
        </section>
        <section>
          <center>
            <img src="images/cssless.png">
          </center>
<aside class="notes">
  After building out Bootstripe, CSS is much less a part of our everyday lives than it used to be :).
  <br><br>
  Developers are able to focus a lot more on the 10% polish and building, and leave the CSS to the CSS experts.
</aside>
        </section>
        <section>
          <center>
            <strong>
              <h4><code>.modal-dialog-view div.modal div.modal-content-form div:last-child p</code></h4>
              <div class="fragment">
              <h5><code>.bs-Fieldset-explanation</code></h5>
              <br>
              <img src="images/info.png">
              <br>
              </div>
            </strong>
          </center>
<aside class="notes">
  Hopefully a few years from now, instead of trying to figure out what this means when styling an explanation to a form field, we'll know exactly what class to add and it'll work as expected, because it's documented, tested, and we know it follows the conventions that we've built tooling around.
</aside>
        </section>

        <section>
          <h3><strong>Thanks! :)</strong></h3>
          <h4>@michelle on Github</h4>
          <h5>@hazelcough on Twitter</h5>
          <br>
          <br>
        <h3 style="text-align: left; font-size: 1.2em;">Resources:</h3>
        <ul>
          <li><a style="color: blue;" href="https://github.com/reworkcss/rework">rework</a> (preprocessor)</li>
          <li><a style="color: blue;" href="http://suitcss.github.io/">SUIT CSS</a> (style guide)</li>
          <li><a style="color: blue;" href="https://github.com/michelle/rework-stripe-conformance">rework-suit-conformance</a> (conformance checks)</li>
          <li><a style="color: blue;" href="https://github.com/SlexAxton/rework-pseudo-classes">rework-pseudo-classes</a> (testing)</li>
          <li><a style="color: blue;" href="https://github.com/facebookarchive/huxley">Huxley</a> (testing)</li>
          <li><a style="color: blue;" href="https://github.com/chenglou/grunt-huxley">grunt-huxley</a> (testing)</li>
        </ul>
        </section>
        <aside class="notes">
  Thanks for coming out today! Most of the team working on our dashboard rewrite project are actually here today, so come by and say hi afterwards! I'll post these slides online in a bit.
  <br><br>
  My hope is that if we talk about CSS more at the start of a project, we're able to think about CSS less by the end.
  <br><br>
  Thank you!
          </aside>
      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        maxScale: 10,



        controls: false,
        progress: false,
        history: true,
        backgroundTransition: 'slide',
        transition: 'linear',
        //parallaxBackgroundImage: 'https://scontent-a-pao.xx.fbcdn.net/hphotos-ash3/t31/1912394_10201477360317995_197059161_o.jpg',

        theme: 'default', // available themes are in /css/theme

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'socket.io/socket.io.js', async: true },
        { src: 'plugin/notes-server/client.js', async: true }

        ]
      });

    </script>

  </body>
</html>
